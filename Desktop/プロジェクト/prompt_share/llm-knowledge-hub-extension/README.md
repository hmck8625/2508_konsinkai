# LLM Knowledge Hub Chrome Extension

![LLM Knowledge Hub](icons/icon-128.png)

## 概要

LLM Knowledge Hub Chrome拡張機能は、ChatGPT、Claude、Microsoft Copilotなどの対話型AIサービスでの会話を自動収集し、組織のナレッジベースとして活用するためのツールです。

## 主な機能

### 🤖 手動会話収集（推奨）
- **ワンクリック収集**: 各LLMサイトに表示される「収集」ボタンをクリック
- **選択的収集**: 本当に価値ある会話のみを手動で選択
- **即座にフィードバック**: 収集完了を視覚的に確認

### 🔄 自動会話収集（オプション）
- **リアルタイム検出**: ChatGPT、Claude、Copilotでの会話を自動検出
- **価値判定**: 業務に有用な会話のみを自動選別
- **メタデータ付与**: 使用モデル、カテゴリ、効果測定データを自動追加

### 💡 インテリジェント推奨
- **リアルタイム提案**: 入力中のプロンプトに関連する過去事例を表示
- **ワンクリック実行**: 推奨プロンプトをクリックで即座に実行
- **学習機能**: 使用パターンから最適な提案を生成

### 🔒 プライバシー保護
- **自動マスキング**: 個人情報・機密情報を自動検出・匿名化
- **除外パターン**: 特定キーワードを含む会話の自動除外
- **ローカル暗号化**: 送信前のデータ暗号化

### ⚙️ 高度な設定
- **プラットフォーム選択**: 対象LLMサービスの個別制御
- **収集条件**: 最小文字数、品質閾値の調整
- **送信制御**: リアルタイム・バッチ送信の選択

## インストール方法

### 開発版インストール（推奨）

1. **リポジトリをダウンロード**
   ```bash
   git clone <repository-url>
   cd llm-knowledge-hub-extension
   ```

2. **Chrome拡張機能ページを開く**
   - Chromeで `chrome://extensions/` にアクセス
   - 右上の「デベロッパーモード」を有効化

3. **拡張機能を読み込み**
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - `llm-knowledge-hub-extension` フォルダを選択

4. **権限を確認**
   - 必要な権限が表示されたら「有効にする」をクリック

### Chrome Web Store版（将来予定）
Chrome Web Storeでの公開を予定しています。

## 初期設定

### 1. 拡張機能の設定

1. **拡張機能アイコン**をクリック
2. **設定ボタン**から設定ページを開く
3. 必要な設定を調整：
   - 対象プラットフォーム
   - 収集条件
   - プライバシー設定

### 2. Webアプリとの連携

1. ポップアップで**「認証する」**をクリック
2. 開いたWebアプリで認証を完了
3. 拡張機能に認証情報が自動連携

## 使用方法

### 基本的な使い方（手動収集モード）

1. **ChatGPT/Claude/Copilot**で通常通り会話
2. 有用な会話ができたら右上の**「収集」ボタン**をクリック
3. 収集完了の**通知**が表示される
4. Webアプリで**全社での共有・検索**が可能

### 自動収集モードの使い方

1. 設定で**「自動収集」**を選択
2. **ChatGPT/Claude/Copilot**で通常通り会話
3. 価値ある会話が**自動的に検出・保存**
4. 右下に**確認通知**が表示

### 推奨機能の活用

1. プロンプト入力中に**💡アイコン**が表示
2. クリックで**関連する過去事例**を確認
3. 使いたい事例を**ワンクリックで実行**

### ステータス確認

- **拡張機能アイコン**: 現在の状態を色で表示
  - 🟢 正常動作中
  - 🟡 同期中
  - 🔴 エラー発生
- **ポップアップ**: 詳細な統計情報を表示

## 設定詳細

### データ収集設定

| 設定項目 | 説明 | 推奨値 |
|---------|-----|-------|
| **最小プロンプト長** | 収集対象の最小文字数 | 50文字 |
| **最小応答長** | 収集対象の最小応答文字数 | 100文字 |
| **対象プラットフォーム** | 監視するLLMサービス | ChatGPT + Claude |

### プライバシー設定

| 設定項目 | 説明 | 推奨値 |
|---------|-----|-------|
| **自動マスキング** | 個人情報の自動匿名化 | 有効 |
| **除外キーワード** | 収集除外するキーワード | password, confidential |
| **送信前確認** | 手動確認の要求 | 無効 |

### 送信設定

| 設定項目 | 説明 | 推奨値 |
|---------|-----|-------|
| **リアルタイム送信** | 即座にサーバーに送信 | 有効 |
| **バッチ間隔** | まとめて送信する間隔 | 5分 |
| **オフライン対応** | 接続断時のローカル保存 | 有効 |

## トラブルシューティング

### よくある問題

#### 🔴 会話が検出されない
**原因**: サイトの構造変更、権限不足
**解決策**: 
1. ページを再読み込み
2. 拡張機能を一度無効化→有効化
3. Chrome/サイトを最新版に更新

#### 🔴 認証エラー
**原因**: 認証トークンの期限切れ
**解決策**:
1. ポップアップから再認証
2. Webアプリでログイン状態を確認

#### 🔴 推奨が表示されない
**原因**: サーバー接続エラー、データ不足
**解決策**:
1. ネットワーク接続を確認
2. しばらく使用してデータを蓄積

### ログの確認方法

1. **開発者ツール**を開く（F12）
2. **Console**タブでエラーメッセージを確認
3. `LLM Knowledge Hub:` で始まるログを検索

### サポート

問題が解決しない場合：
1. [ヘルプページ](https://your-company.com/llm-hub/help)を確認
2. [フィードバック](https://your-company.com/llm-hub/feedback)でお問い合わせ
3. 社内ITサポートに連絡

## 開発者向け情報

### アーキテクチャ

```
┌─────────────────────────────────────────┐
│ Content Scripts (各LLMサイト)            │
├─────────────────────────────────────────┤
│ • chatgpt.js - ChatGPT検出              │
│ • claude.js - Claude検出                │  
│ • copilot.js - Copilot検出              │
│ • common.js - 共通ユーティリティ         │
└─────────────────┬───────────────────────┘
                  │ postMessage
┌─────────────────▼───────────────────────┐
│ Background Script (Service Worker)      │
├─────────────────────────────────────────┤
│ • イベント調整                           │
│ • API通信                               │
│ • データストレージ管理                   │
│ • 認証管理                              │
└─────────────────┬───────────────────────┘
                  │ chrome.storage / fetch
┌─────────────────▼───────────────────────┐
│ UI Components                           │
├─────────────────────────────────────────┤
│ • popup/ - ポップアップ                  │
│ • options/ - 設定ページ                 │
└─────────────────────────────────────────┘
```

### ファイル構成

```
llm-knowledge-hub-extension/
├── manifest.json              # 拡張機能マニフェスト
├── background.js              # バックグラウンドスクリプト
├── popup/
│   ├── popup.html            # ポップアップHTML
│   ├── popup.js              # ポップアップロジック
│   └── popup.css             # ポップアップスタイル
├── content/
│   ├── common.js             # 共通ユーティリティ
│   ├── chatgpt.js            # ChatGPT用スクリプト
│   ├── claude.js             # Claude用スクリプト
│   ├── copilot.js            # Copilot用スクリプト
│   └── styles.css            # コンテンツスクリプト用CSS
├── options/
│   ├── options.html          # 設定ページHTML
│   ├── options.js            # 設定ページロジック
│   └── options.css           # 設定ページスタイル
├── icons/
│   ├── icon-16.png           # 16x16アイコン
│   ├── icon-48.png           # 48x48アイコン
│   └── icon-128.png          # 128x128アイコン
└── README.md                 # このファイル
```

### API仕様

#### 会話データ送信
```javascript
POST /api/conversations
{
  "prompt": "ユーザーのプロンプト",
  "response": "LLMの応答",
  "model": "使用モデル",
  "platform": "使用プラットフォーム",
  "timestamp": "ISO8601形式",
  "metadata": {
    "category": "自動分類",
    "score": "価値スコア",
    "tokens": "推定トークン数"
  }
}
```

#### 推奨取得
```javascript
POST /api/recommendations
{
  "query": "部分的なプロンプト",
  "limit": 3
}

Response:
{
  "recommendations": [
    {
      "title": "推奨タイトル",
      "prompt": "完全なプロンプト",
      "preview": "プレビューテキスト",
      "score": "関連度スコア"
    }
  ]
}
```

### カスタマイズ

#### 新しいプラットフォームの追加

1. `content/` に新しいJSファイルを作成
2. `manifest.json` のcontent_scriptsに追加
3. `LLMContentCommon` を継承してプラットフォーム固有の実装

#### カスタム価値判定

`background.js` の `assessConversationValue` メソッドを修正して独自の価値判定ロジックを実装

## セキュリティ

### データ保護
- **転送時暗号化**: TLS 1.3によるHTTPS通信
- **保存時暗号化**: Chrome Storage API + AES-256
- **アクセス制御**: 最小権限の原則を適用

### プライバシー
- **自動マスキング**: 個人情報の自動検出・匿名化
- **データ最小化**: 必要最小限のデータのみ収集
- **自動削除**: 30日後のローカルデータ自動削除

## ライセンス

このプロジェクトは社内使用のためのものです。外部への配布や商用利用は禁止されています。

## 更新履歴

### v1.0.0 (2025年6月7日)
- 初回リリース
- ChatGPT、Claude、Copilot対応
- 基本的な会話収集・推奨機能
- 設定画面・ポップアップUI

---

**開発チーム**: AI活用推進室  
**最終更新**: 2025年6月7日